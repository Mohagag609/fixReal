# نظام إدارة العقارات المتطور v2.0

نظام إدارة عقارات شامل ومتطور مبني بـ Next.js 14 و TypeScript و PostgreSQL.

## 🚀 المميزات الرئيسية

### 📊 لوحة التحكم الشاملة
- إحصائيات شاملة ومؤشرات الأداء
- مخططات بيانية تفاعلية
- النشاطات الأخيرة والأقساط القادمة
- نظرة عامة على حالة النظام

### 👥 إدارة العملاء
- إضافة وتعديل وحذف العملاء
- البحث والفلترة المتقدمة
- إحصائيات العملاء والنشاطات
- إدارة البيانات الشخصية والاتصال

### 🏢 إدارة الوحدات العقارية
- إدارة شاملة للوحدات العقارية
- تصنيف الوحدات (سكني، تجاري، مكتبي)
- تتبع حالة الوحدات (متاحة، محجوزة، مباعة)
- إدارة تفاصيل الوحدات والأسعار

### 📋 إدارة العقود
- إنشاء وإدارة عقود البيع والإيجار
- ربط العملاء بالوحدات
- حساب الخصومات وعمولات السماسرة
- تتبع حالة العقود والمدفوعات

### 💰 إدارة الأقساط
- جدولة ومتابعة أقساط العقود
- تتبع المدفوعات والمتأخرات
- إشعارات الأقساط القادمة
- تقارير مفصلة عن الأقساط

### 🏦 إدارة الخزائن المالية
- إدارة متعددة الخزائن
- تتبع الأرصدة والإيصالات والمدفوعات
- ربط السندات بالخزائن
- تقارير مالية شاملة

### 📄 إدارة السندات المالية
- إيصالات القبض وسندات الدفع
- ربط السندات بالخزائن
- تتبع الدافعين والمستفيدين
- إدارة المراجع المرتبطة

### 🤝 إدارة الشركاء
- إدارة الشركاء والمستحقات
- تتبع الديون والمدفوعات
- تقارير مالية للشركاء
- إحصائيات شاملة

### 👨‍💼 إدارة السماسرة
- إدارة السماسرة وعمولاتهم
- حساب النسب والمبالغ
- تتبع المستحقات والمدفوعات
- تقارير الأداء

### 📈 التقارير والإحصائيات
- تقارير مالية شاملة
- إحصائيات المبيعات والأداء
- مخططات بيانية تفاعلية
- تصدير التقارير

### ⚙️ إعدادات النظام
- إعدادات الشركة والمستخدم
- إدارة الإشعارات
- النسخ الاحتياطي والاستعادة
- إعدادات النظام المتقدمة

## 🛠️ التقنيات المستخدمة

### Frontend
- **Next.js 14** - إطار عمل React مع App Router
- **TypeScript** - لغة البرمجة مع التحقق من الأنواع
- **Tailwind CSS** - إطار عمل CSS للتصميم
- **shadcn/ui** - مكتبة مكونات UI متقدمة
- **Framer Motion** - مكتبة الحركات والانتقالات
- **Lucide React** - مكتبة الأيقونات

### Backend
- **Next.js API Routes** - واجهات برمجة التطبيقات
- **PostgreSQL** - قاعدة البيانات العلائقية
- **pg** - مكتبة Node.js للاتصال بـ PostgreSQL
- **Zod** - مكتبة التحقق من صحة البيانات

### Database
- **PostgreSQL** - قاعدة البيانات الرئيسية
- **Neon DB** - قاعدة البيانات السحابية للإنتاج
- **Schema متكامل** - جداول مترابطة مع العلاقات

## 📁 هيكل المشروع

```
src/
├── app/                    # صفحات Next.js
│   ├── api/               # واجهات برمجة التطبيقات
│   │   ├── customers/     # API العملاء
│   │   ├── units/         # API الوحدات
│   │   ├── contracts/     # API العقود
│   │   ├── installments/  # API الأقساط
│   │   ├── safes/         # API الخزائن
│   │   ├── vouchers/      # API السندات
│   │   ├── partners/      # API الشركاء
│   │   ├── brokers/       # API السماسرة
│   │   ├── reports/       # API التقارير
│   │   └── dashboard/     # API لوحة التحكم
│   ├── customers/         # صفحة العملاء
│   ├── units/             # صفحة الوحدات
│   ├── contracts/         # صفحة العقود
│   ├── installments/      # صفحة الأقساط
│   ├── safes/             # صفحة الخزائن
│   ├── vouchers/          # صفحة السندات
│   ├── partners/          # صفحة الشركاء
│   ├── brokers/           # صفحة السماسرة
│   ├── reports/           # صفحة التقارير
│   ├── settings/          # صفحة الإعدادات
│   └── page.tsx           # الصفحة الرئيسية
├── components/            # مكونات React
│   ├── ui/               # مكونات UI الأساسية
│   ├── app-layout.tsx    # تخطيط التطبيق
│   ├── sidebar.tsx       # الشريط الجانبي
│   ├── header.tsx        # الرأس
│   └── *-content.tsx     # مكونات الصفحات
├── lib/                  # المكتبات والأدوات
│   ├── db.ts            # اتصال قاعدة البيانات
│   └── utils.ts         # وظائف مساعدة
├── types/               # تعريفات TypeScript
└── utils/               # وظائف مساعدة
    └── calculations.ts  # الحسابات والعمليات
```

## 🚀 التثبيت والتشغيل

### المتطلبات
- Node.js 18+ 
- PostgreSQL 12+
- npm أو yarn

### 1. استنساخ المشروع
```bash
git clone <repository-url>
cd estate-management-system-v2
```

### 2. تثبيت التبعيات
```bash
npm install
```

### 3. إعداد قاعدة البيانات
```bash
# إنشاء قاعدة البيانات
npm run setup-db

# إدراج البيانات التجريبية
npm run seed-db
```

### 4. إعداد متغيرات البيئة
إنشاء ملف `.env.local`:
```env
DATABASE_URL="postgresql://username:password@localhost:5432/estate_db"
```

### 5. تشغيل المشروع
```bash
# وضع التطوير
npm run dev

# بناء المشروع للإنتاج
npm run build
npm start
```

## 🌐 الوصول للتطبيق

- **التطوير**: http://localhost:3000
- **الإنتاج**: حسب إعدادات الخادم

## 📊 قاعدة البيانات

### الجداول الرئيسية
- **customers** - العملاء
- **units** - الوحدات العقارية
- **contracts** - العقود
- **installments** - الأقساط
- **safes** - الخزائن المالية
- **vouchers** - السندات المالية
- **partners** - الشركاء
- **brokers** - السماسرة
- **partner_debts** - ديون الشركاء
- **broker_dues** - مستحقات السماسرة

### العلاقات
- العملاء ← العقود ← الوحدات
- العقود ← الأقساط
- الخزائن ← السندات
- الشركاء ← ديون الشركاء
- السماسرة ← مستحقات السماسرة

## 🔧 الأوامر المتاحة

```bash
# التطوير
npm run dev

# البناء
npm run build

# التشغيل
npm start

# الفحص
npm run lint
npm run type-check

# التنسيق
npm run format
npm run format:check

# قاعدة البيانات
npm run setup-db
npm run seed-db
npm run db:setup
```

## 🎨 التصميم والواجهة

### نظام الألوان
- **Primary**: أزرق احترافي
- **Secondary**: رمادي أنيق
- **Success**: أخضر للنجاح
- **Warning**: أصفر للتحذير
- **Destructive**: أحمر للأخطاء

### المكونات
- تصميم متجاوب (Responsive)
- دعم الوضع المظلم والفاتح
- حركات سلسة مع Framer Motion
- أيقونات واضحة مع Lucide React

## 🔒 الأمان

- التحقق من صحة البيانات مع Zod
- حماية من SQL Injection
- معالجة الأخطاء الشاملة
- تنظيف البيانات المدخلة

## 📱 التوافق

- **المتصفحات**: Chrome, Firefox, Safari, Edge
- **الأجهزة**: Desktop, Tablet, Mobile
- **الشاشات**: 320px - 4K

## 🚀 النشر

### Vercel
```bash
# تثبيت Vercel CLI
npm i -g vercel

# النشر
vercel
```

### Netlify
```bash
# بناء المشروع
npm run build

# رفع مجلد .next
```

## 🤝 المساهمة

1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. Commit التغييرات
4. Push للفرع
5. إنشاء Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT.

## 📞 الدعم

للحصول على الدعم أو الإبلاغ عن مشاكل:
- إنشاء Issue في GitHub
- التواصل عبر البريد الإلكتروني

## 🔄 التحديثات المستقبلية

- [ ] تطبيق الجوال
- [ ] نظام الإشعارات المتقدم
- [ ] التكامل مع أنظمة الدفع
- [ ] الذكاء الاصطناعي للتنبؤات
- [ ] نظام الصلاحيات المتقدم
- [ ] التكامل مع الخرائط
- [ ] نظام العقود الذكية

---

**تم تطوير هذا المشروع بـ ❤️ باستخدام أحدث التقنيات**